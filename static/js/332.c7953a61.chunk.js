"use strict";(self.webpackChunkmain_project_1=self.webpackChunkmain_project_1||[]).push([[332],{8332:(s,e,t)=>{t.r(e),t.d(e,{default:()=>I});var o=t(5043),i=t(3923),l=t(3003),r=t(6048),a=t(229);const n={posts:"Profile_posts__l3TcI",matchedBlock:"Profile_matchedBlock__TlOZJ",changeProfilePhoto:"Profile_changeProfilePhoto__W5KDf",profilePhoto:"Profile_profilePhoto__b3mcI",profileInfo:"Profile_profileInfo__NKmvI",status:"Profile_status__SC2Y9",contacts:"Profile_contacts__Xbirj",date:"Profile_date__QYIIz"},c={posts:"MyPosts_posts__IQTM1",elementsBlock:"MyPosts_elementsBlock__96k7A",postsContainer:"MyPosts_postsContainer__1J3Aq",postMessage:"MyPosts_postMessage__+D7Qe",postLikes:"MyPosts_postLikes__hlToT",sendButton:"MyPosts_sendButton__yPPcW"};var d=t(9219),u=t(4943),p=t(579);const f=s=>(0,p.jsxs)("div",{className:c.posts,children:[(0,p.jsx)("img",{className:c.profilePhoto,alt:"image",src:u}),(0,p.jsx)("div",{className:c.postMessage,children:s.message}),(0,p.jsxs)("div",{className:c.postLikes,children:["Likes: ",s.likesCount," ",(0,p.jsx)("img",{src:d,alt:"likes-icon"})]})]});var h=t(1721),m=t(4310),x=t(7143);const j=(0,m.dX)(5),g=(0,h.A)({form:"addPostMessageForm"})((s=>(0,p.jsx)("form",{onSubmit:s.handleSubmit,children:(0,p.jsxs)("div",{className:c.elementsBlock,children:[(0,x.Fv)(null,50,3,"Write the message","addPostMessage",[m.MB,j],x.TM),(0,p.jsx)("button",{className:c.sendButton,children:"Send message"})]})}))),v=s=>{const e=s.profilePage.posts.map((s=>(0,p.jsx)(f,{message:s.message,likesCount:s.likesCount})));return(0,p.jsxs)("div",{children:[(0,p.jsx)(g,{onSubmit:e=>{const{addPostMessage:t}=e;s.addPostAC(t)}}),(0,p.jsxs)("div",{className:c.postsContainer,children:[(0,p.jsx)("h3",{children:"My posts"}),(0,p.jsx)("div",{children:e})]})]})};const P=(0,l.Ng)((s=>({profilePage:s.profilePage})),{addPostAC:r.o1.addPostAC})(v);var _=t(8311);const k=s=>{const[e,t]=(0,o.useState)(!1),[i,l]=(0,o.useState)("");(0,o.useEffect)((()=>{l(s.statusText)}),[s.statusText]);s.updateUserStatus(i);return(0,p.jsxs)("div",{className:n.status,children:[!e&&(0,p.jsxs)("div",{children:["status: ",(0,p.jsx)("span",{onClick:()=>{t(!0)},children:s.statusText||"----"})]}),e&&(0,p.jsx)("div",{children:(0,p.jsx)("input",{onBlur:()=>{t(!1)},value:i,onChange:s=>{l(s.currentTarget.value)}})})]})},b=s=>{const e=new Date;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:n.alwaysProfileBlock,children:(0,p.jsx)("div",{className:n.date,children:e.toDateString()})})})},M=(0,h.A)({form:"edit-profile"})((s=>(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,p.jsx)("button",{children:"Save changes"}),(0,p.jsx)("div",{className:n.profileInfo,children:(0,p.jsxs)("div",{children:["my id is: ",(0,x.Fv)(null,null,null,"User id","userId",[],x.pd),(0,p.jsxs)("div",{children:["about me: ",(0,x.Fv)(null,0,0,"About me","aboutMe",[],x.TM),(0,p.jsxs)("div",{children:["looking for a job: ",(0,x.Fv)(null,null,null,"Looking for a job","lookingForAJob",[],x.pd,{type:"checkbox"}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{children:["my programming skills: ",(0,x.Fv)(null,0,0,"My skills","lookingForAJobDescription",[],x.TM)]}),(0,p.jsxs)("div",{children:["my name is: ",(0,x.Fv)(null,null,null,"Name","fullName",[],x.pd)]}),(0,p.jsxs)("div",{className:n.contacts,children:["contacts: ",Object.keys(s.profile.contacts).map((s=>(0,p.jsxs)("div",{children:[s,": ",(0,x.Fv)(null,null,null,s,"contacts."+s,[],x.pd)]},s)))]})]})]})]})]})})]})}))),N=s=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:s.toEditProfile,children:"Edit profile info"}),(0,p.jsx)("div",{className:n.profileInfo,children:(0,p.jsxs)("div",{children:["my id is: ",s.profile.userId,(0,p.jsxs)("div",{children:["about me: ",s.profile.aboutMe?s.profile.aboutMe:"I am the human!",(0,p.jsxs)("div",{children:["looking for a job: ",s.profile.lookingForAJob?"yes":"no",(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{children:["my programming skills: ",s.profile.lookingForAJobDescription?s.profile.lookingForAJobDescription:"----"]}),(0,p.jsxs)("div",{children:["my name is: ",s.profile.fullName]}),(0,p.jsxs)("div",{className:n.contacts,children:["contacts: ",Object.keys(s.profile.contacts).map((e=>(0,p.jsxs)("div",{children:[e,": ",s.profile.contacts[e]?s.profile.contacts[e]:"https://somesite.com"]},e)))]})]})]})]})]})})]}),y=s=>{const[e,t]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null);return s.profile?(0,p.jsxs)("div",{children:[(0,p.jsx)(b,{isOwner:s.isOwner}),(0,p.jsx)("div",{className:n.matchedBlock,children:(0,p.jsxs)("div",{children:[(0,p.jsx)("img",{className:n.profilePhoto,alt:"profile photo",src:s.profile.photos.small||u||i}),s.isOwner?(0,p.jsx)("input",{onChange:s=>{s.target.files&&s.target.files.length&&l(URL.createObjectURL(s.target.files[0]))},type:"file",className:n.changeProfilePhoto}):null,(0,p.jsx)(k,{updateUserStatus:s.updateUserStatus,statusText:s.statusText}),(0,p.jsx)("div",{children:(0,p.jsx)("span",{children:e?(0,p.jsx)(M,{initialValues:s.profile,onSubmit:e=>{s.saveProfile(e).then((()=>{t((s=>!s))}))},profile:s.profile}):(0,p.jsx)(N,{profile:s.profile,toEditProfile:()=>{t((s=>!s))},isOwner:s.isOwner})})})]})}),(0,p.jsx)(P,{})]}):(0,p.jsx)(_.A,{})};var S=t(1352);const I=(0,i.Zz)(S.H,a.y,(0,l.Ng)((s=>({profile:s.profilePage.profile,statusText:s.profilePage.statusText,authorizedUserId:s.auth.userId})),{getUserProfile:r.VM,getUserProfileStatus:r.Rv,updateUserStatus:r.pU}))((s=>{let e;const t=()=>{e=+s.params.userId,e||(e=s.authorizedUserId,e||s.navigate("/login")),e?(s.getUserProfile(e),s.getUserProfileStatus(e)):console.error("Id should be exist")};return(0,o.useEffect)((()=>{t()}),[]),(0,o.useEffect)((()=>{e=+s.params.userId,t()}),[s.params.userId]),(0,p.jsx)(y,{profile:s.profile,updateUserStatus:s.updateUserStatus,statusText:s.statusText,isOwner:!s.params.userId,saveProfile:s.saveProfile})}))}}]);
//# sourceMappingURL=332.c7953a61.chunk.js.map