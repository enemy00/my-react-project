"use strict";(self.webpackChunkmain_project_1=self.webpackChunkmain_project_1||[]).push([[122],{7122:(s,e,t)=>{t.r(e),t.d(e,{default:()=>U});var o=t(5043);const i={posts:"Profile_posts__l3TcI",matchedBlock:"Profile_matchedBlock__TlOZJ",changeProfilePhoto:"Profile_changeProfilePhoto__W5KDf",profilePhoto:"Profile_profilePhoto__b3mcI",profileInfo:"Profile_profileInfo__NKmvI",status:"Profile_status__SC2Y9",contacts:"Profile_contacts__Xbirj",date:"Profile_date__QYIIz"},r={posts:"MyPosts_posts__IQTM1",elementsBlock:"MyPosts_elementsBlock__96k7A",postsContainer:"MyPosts_postsContainer__1J3Aq",postMessage:"MyPosts_postMessage__+D7Qe",postLikes:"MyPosts_postLikes__hlToT",sendButton:"MyPosts_sendButton__yPPcW"};var a=t(9219),l=t(4943),n=t(579);const c=s=>(0,n.jsxs)("div",{className:r.posts,children:[(0,n.jsx)("img",{className:r.profilePhoto,alt:"image",src:l}),(0,n.jsx)("div",{className:r.postMessage,children:s.message}),(0,n.jsxs)("div",{className:r.postLikes,children:["Likes: ",s.likesCount," ",(0,n.jsx)("img",{src:a,alt:"likes-icon"})]})]});var d=t(1721),p=t(4310),h=t(7143);const u=(0,p.d)(5),f=(0,d.A)({form:"addPostMessageForm"})((s=>(0,n.jsx)("form",{onSubmit:s.handleSubmit,children:(0,n.jsxs)("div",{className:r.elementsBlock,children:[(0,h.Fv)(50,3,"Type ur message","addPostMessage",[p.M,u],h.TM),(0,n.jsx)("button",{className:r.sendButton,children:"Send message"})]})}))),m=s=>{const e=s.profilePage.posts.map((s=>(0,n.jsx)(c,{message:s.message,likesCount:s.likesCount})));return(0,n.jsxs)("div",{children:[(0,n.jsx)(f,{onSubmit:e=>{const{addPostMessage:t}=e;s.addPostAC(t)}}),(0,n.jsxs)("div",{className:r.postsContainer,children:[(0,n.jsx)("h3",{children:"My posts"}),(0,n.jsx)("div",{children:e})]})]})};var x=t(3003),j=t(6048);const v=(0,x.Ng)((s=>({profilePage:s.profilePage})),{addPostAC:j.o1.addPostAC})(m);var g=t(8311);const P=s=>{const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)("");(0,o.useEffect)((()=>{a(s.statusText)}),[s.statusText]);s.updateUserStatus(r);return(0,n.jsxs)("div",{className:i.status,children:[!e&&(0,n.jsxs)("div",{children:["status: ",(0,n.jsx)("span",{onClick:()=>{t(!0)},children:s.statusText||"----"})]}),e&&(0,n.jsx)("div",{children:(0,n.jsx)("input",{onBlur:()=>{t(!1)},value:r,onChange:s=>{a(s.currentTarget.value)}})})]})},_=s=>{const e=new Date;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:i.alwaysProfileBlock,children:(0,n.jsx)("div",{className:i.date,children:e.toDateString()})})})},k=(0,d.A)({form:"edit-profile"})((s=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,n.jsx)("button",{children:"Save changes"}),(0,n.jsx)("div",{className:i.profileInfo,children:(0,n.jsxs)("div",{children:["my id is: ",(0,h.Fv)(0,0,"User id","userId",[],h.pd),(0,n.jsxs)("div",{children:["about me: ",(0,h.Fv)(0,0,"About me","aboutMe",[],h.TM),(0,n.jsxs)("div",{children:["looking for a job: ",(0,h.Fv)(0,0,"Looking for a job","lookingForAJob",[],h.pd,{type:"checkbox"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["my programming skills: ",(0,h.Fv)(0,0,"My skills","lookingForAJobDescription",[],h.TM)]}),(0,n.jsxs)("div",{children:["my name is: ",(0,h.Fv)(0,0,"Name","fullName",[],h.pd)]}),(0,n.jsxs)("div",{className:i.contacts,children:["contacts: ",Object.keys(s.profile.contacts).map((s=>(0,n.jsxs)("div",{children:[s,": ",(0,h.Fv)(0,0,s,"contacts."+s,[],h.pd)]},s)))]})]})]})]})]})})]})}))),b=s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:s.toEditProfile,children:"Edit profile info"}),(0,n.jsx)("div",{className:i.profileInfo,children:(0,n.jsxs)("div",{children:["my id is: ",s.profile.userId,(0,n.jsxs)("div",{children:["about me: ",s.profile.aboutMe?s.profile.aboutMe:"I am the human!",(0,n.jsxs)("div",{children:["looking for a job: ",s.profile.lookingForAJob?"yes":"no",(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["my programming skills: ",s.profile.lookingForAJobDescription?s.profile.lookingForAJobDescription:"----"]}),(0,n.jsxs)("div",{children:["my name is: ",s.profile.fullName]}),(0,n.jsxs)("div",{className:i.contacts,children:["contacts: ",Object.keys(s.profile.contacts).map((e=>(0,n.jsxs)("div",{children:[e,": ",s.profile.contacts[e]?s.profile.contacts[e]:"https://somesite.com"]},e)))]})]})]})]})]})})]}),M=s=>{const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(null);return s.profile?(0,n.jsxs)("div",{children:[(0,n.jsx)(_,{isOwner:s.isOwner}),(0,n.jsx)("div",{className:i.matchedBlock,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{className:i.profilePhoto,alt:"profile photo",src:r||l}),s.isOwner?(0,n.jsx)("input",{onChange:s=>{s.target.files&&s.target.files.length&&a(URL.createObjectURL(s.target.files[0]))},type:"file",className:i.changeProfilePhoto}):null,(0,n.jsx)(P,{updateUserStatus:s.updateUserStatus,statusText:s.statusText}),(0,n.jsx)("div",{children:(0,n.jsx)("span",{children:e?(0,n.jsx)(k,{initialValues:s.profile,onSubmit:e=>{s.saveProfile(e).then((()=>{t((s=>!s))}))},profile:s.profile}):(0,n.jsx)(b,{profile:s.profile,toEditProfile:()=>{t((s=>!s))},isOwner:s.isOwner})})})]})}),(0,n.jsx)(v,{})]}):(0,n.jsx)(g.A,{})};var N=t(3923),y=t(2099);const S=(0,y.Mz)((s=>s.profilePage.profile),(s=>s)),I=(0,y.Mz)((s=>s.profilePage.statusText),(s=>s));var T=t(229),C=t(1352);class A extends o.Component{refreshProfile(){let s=+this.props.params.userId;s||(s=this.props.authorizedUserId,s||this.props.navigate("/login")),s?(this.props.getUserProfile(s),this.props.getUserProfileStatus(s)):console.error("Id should be exist")}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e){s.params.userId!==this.props.params.userId&&this.refreshProfile()}render(){return(0,n.jsx)(M,{profile:this.props.profile,updateUserStatus:this.props.updateUserStatus,statusText:this.props.statusText,isOwner:!this.props.params.userId,saveProfile:this.props.saveProfile})}}const U=(0,N.Zz)(T.y,C.H,(0,x.Ng)((s=>({profile:S(s),statusText:I(s),authorizedUserId:s.auth.userId})),{getUserProfile:j.VM,getUserProfileStatus:j.Rv,saveProfile:j.Lt,updateUserStatus:j.pU}))(A)},1352:(s,e,t)=>{t.d(e,{H:()=>l});var o=t(3216),i=t(3003),r=(t(5043),t(579));const a=s=>({isAuth:s.auth.isAuth});function l(s){return(0,i.Ng)(a,{})((e=>{let{isAuth:t,...i}=e;return t?(0,r.jsx)(s,{...i}):(0,r.jsx)(o.C5,{to:"/login"})}))}}}]);
//# sourceMappingURL=122.5397f31c.chunk.js.map