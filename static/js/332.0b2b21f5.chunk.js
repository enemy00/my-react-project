"use strict";(self.webpackChunkmain_project_1=self.webpackChunkmain_project_1||[]).push([[332],{8332:(s,e,t)=>{t.r(e),t.d(e,{default:()=>O});var i=t(5043),l=t(3923),o=t(3003),r=t(6048),a=t(229);const n="Profile_matchedBlock__TlOZJ",d="Profile_changeProfilePhoto__W5KDf",c="Profile_profilePhoto__b3mcI",u="Profile_profileInfo__NKmvI",p="Profile_status__SC2Y9",m="Profile_contacts__Xbirj",f="Profile_date__QYIIz",h={posts:"MyPosts_posts__IQTM1",elementsBlock:"MyPosts_elementsBlock__96k7A",postsContainer:"MyPosts_postsContainer__1J3Aq",vkArea:"MyPosts_vkArea__NTAYG",postMessage:"MyPosts_postMessage__+D7Qe",postLikes:"MyPosts_postLikes__hlToT",sendButton:"MyPosts_sendButton__yPPcW"};var x=t(9219),j=t(4943),v=t(579);const g=s=>(0,v.jsxs)("div",{className:h.posts,children:[(0,v.jsx)("img",{className:h.profilePhoto,alt:"image",src:j}),(0,v.jsx)("div",{className:h.postMessage,children:s.message}),(0,v.jsxs)("div",{className:h.postLikes,children:["Likes: ",s.likesCount," ",(0,v.jsx)("img",{src:x,alt:"likes-icon"})]})]});var _=t(1721),P=t(4310),k=t(7143);const b=(0,P.dX)(5),M=(0,_.A)({form:"addPostMessageForm"})((s=>(0,v.jsx)("form",{onSubmit:s.handleSubmit,children:(0,v.jsxs)("div",{className:h.elementsBlock,children:[(0,k.Fv)(null,50,3,"Write the message","addPostMessage",[P.MB,b],k.TM),(0,v.jsx)("button",{className:h.sendButton,children:"Send message"})]})}))),N=s=>{const e=s.profilePage.posts.map((s=>(0,v.jsx)(g,{message:s.message,likesCount:s.likesCount})));return(0,v.jsxs)("div",{children:[(0,v.jsx)(M,{onSubmit:e=>{const{addPostMessage:t}=e;s.addPostAC(t)}}),(0,v.jsxs)("div",{className:h.postsContainer,children:[(0,v.jsx)("h3",{children:"My posts"}),(0,v.jsx)("div",{children:e})]})]})};const y=(0,o.Ng)((s=>({profilePage:s.profilePage})),{addPostAC:r.o1.addPostAC})(N);var S=t(8311);const T=s=>{const[e,t]=(0,i.useState)(!1),[l,o]=(0,i.useState)("");(0,i.useEffect)((()=>{o(s.statusText)}),[s.statusText]);s.updateUserStatus(l);return(0,v.jsxs)("div",{className:p,children:[!e&&(0,v.jsxs)("div",{children:["status: ",(0,v.jsx)("span",{onClick:()=>{t(!0)},children:s.statusText||"----"})]}),e&&(0,v.jsx)("div",{children:(0,v.jsx)("input",{onBlur:()=>{t(!1)},value:l,onChange:s=>{o(s.currentTarget.value)}})})]})},A=s=>{const e=new Date;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{children:(0,v.jsx)("div",{className:f,children:e.toDateString()})})})},I=(0,_.A)({form:"edit-profile"})((s=>(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,v.jsx)("button",{children:"Save changes"}),(0,v.jsx)("div",{className:u,children:(0,v.jsxs)("div",{children:["my id is: ",(0,k.Fv)(null,null,null,"User id","userId",[],k.pd),(0,v.jsxs)("div",{children:["about me: ",(0,k.Fv)(null,0,0,"About me","aboutMe",[],k.TM),(0,v.jsxs)("div",{children:["looking for a job: ",(0,k.Fv)(null,null,null,"Looking for a job","lookingForAJob",[],k.pd,{type:"checkbox"}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{children:["my programming skills: ",(0,k.Fv)(null,0,0,"My skills","lookingForAJobDescription",[],k.TM)]}),(0,v.jsxs)("div",{children:["my name is: ",(0,k.Fv)(null,null,null,"Name","fullName",[],k.pd)]}),(0,v.jsxs)("div",{className:m,children:["contacts: ",Object.keys(s.profile.contacts).map((s=>(0,v.jsxs)("div",{children:[s,": ",(0,k.Fv)(null,null,null,s,"contacts."+s,[],k.pd)]},s)))]})]})]})]})]})})]})}))),C=s=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:s.toEditProfile,children:"Edit profile info"}),(0,v.jsx)("div",{className:u,children:(0,v.jsxs)("div",{children:["my id is: ",s.profile.userId,(0,v.jsxs)("div",{children:["about me: ",s.profile.aboutMe?s.profile.aboutMe:"I am the human!",(0,v.jsxs)("div",{children:["looking for a job: ",s.profile.lookingForAJob?"yes":"no",(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{children:["my programming skills: ",s.profile.lookingForAJobDescription?s.profile.lookingForAJobDescription:"----"]}),(0,v.jsxs)("div",{children:["my name is: ",s.profile.fullName]}),(0,v.jsxs)("div",{className:m,children:["contacts: ",Object.keys(s.profile.contacts).map((e=>(0,v.jsxs)("div",{children:[e,": ",s.profile.contacts[e]?s.profile.contacts[e]:"https://somesite.com"]},e)))]})]})]})]})]})})]}),F=s=>{const[e,t]=(0,i.useState)(!1),[l,o]=(0,i.useState)(null);return s.profile?(0,v.jsxs)("div",{children:[(0,v.jsx)(A,{isOwner:s.isOwner}),(0,v.jsx)("div",{className:n,children:(0,v.jsxs)("div",{children:[(0,v.jsx)("img",{className:c,alt:"profile photo",src:s.profile.photos.small||j||l}),s.isOwner?(0,v.jsx)("input",{onChange:s=>{s.target.files&&s.target.files.length&&o(URL.createObjectURL(s.target.files[0]))},type:"file",className:d}):null,(0,v.jsx)(T,{updateUserStatus:s.updateUserStatus,statusText:s.statusText}),(0,v.jsx)("div",{children:(0,v.jsx)("span",{children:e?(0,v.jsx)(I,{initialValues:s.profile,onSubmit:e=>{s.saveProfile(e).then((()=>{t((s=>!s))}))},profile:s.profile}):(0,v.jsx)(C,{profile:s.profile,toEditProfile:()=>{t((s=>!s))},isOwner:s.isOwner})})})]})}),(0,v.jsx)(y,{})]}):(0,v.jsx)(S.A,{})};var U=t(1352);const O=(0,l.Zz)(U.H,a.y,(0,o.Ng)((s=>({profile:s.profilePage.profile,statusText:s.profilePage.statusText,authorizedUserId:s.auth.userId})),{getUserProfile:r.VM,getUserProfileStatus:r.Rv,updateUserStatus:r.pU}))((s=>{let e;const t=()=>{e=+s.params.userId,e||(e=s.authorizedUserId,e||s.navigate("/login")),e?(s.getUserProfile(e),s.getUserProfileStatus(e)):console.error("Id should be exist")};return(0,i.useEffect)((()=>{t()}),[]),(0,i.useEffect)((()=>{e=+s.params.userId,t()}),[s.params.userId]),(0,v.jsx)(F,{profile:s.profile,updateUserStatus:s.updateUserStatus,statusText:s.statusText,isOwner:!s.params.userId,saveProfile:s.saveProfile})}))}}]);
//# sourceMappingURL=332.0b2b21f5.chunk.js.map